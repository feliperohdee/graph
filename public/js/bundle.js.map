{"version":3,"sources":["webpack:///./src/client/index.jsx","webpack:///./src/client/Graphi.jsx"],"names":["render","document","getElementById","search","window","location","Graphi","props","parameters","substr","split","forEach","eq","entry","indexOf","decodeURIComponent","slice","variables","JSON","stringify","parse","e","newQuery","query","updateURL","newVariables","newOperationName","operationName","newSearch","Object","keys","filter","Boolean","key","map","encodeURIComponent","join","history","replaceState","graphQLParams","origin","method","headers","body","credentials","then","response","text","responseBody","error","fetcher","onEditQuery","onEditVariables","onEditOperationName"],"mappings":"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","file":"bundle.js","sourcesContent":["import React from 'react';\nimport ReactDOM from 'react-dom';\nimport {\n    Graphi\n} from './Graphi';\n\nReactDOM.render(<Graphi/>, document.getElementById('graphiql'));\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/client/index.jsx\n **/","import GraphiQL from 'graphiql';\nimport fetch from 'isomorphic-fetch';\nimport React, {\n    Component\n} from 'react';\n\n// Parse the search string to get url parameters.\nconst search = window.location.search;\n\nexport class Graphi extends Component {\n    parameters = {};\n\n    constructor(props) {\n        super(props);\n\n        search\n            .substr(1)\n            .split('&')\n            .forEach(entry => {\n                const eq = entry.indexOf('=');\n\n                if (eq >= 0) {\n                    this.parameters[decodeURIComponent(entry.slice(0, eq))] = decodeURIComponent(entry.slice(eq + 1));\n                }\n            });\n\n        // if variables was provided, try to format it.\n        if (this.parameters.variables) {\n            try {\n                this.parameters.variables = JSON.stringify(JSON.parse(this.parameters.variables), null, 2);\n            } catch (e) {\n                // Do nothing, we want to display the invalid JSON as a string, rather\n                // than present an error.\n            }\n        }\n    }\n\n    onEditQuery(newQuery) {\n        this.parameters.query = newQuery;\n        this.updateURL();\n    }\n\n    onEditVariables(newVariables) {\n        this.parameters.variables = newVariables;\n        this.updateURL();\n    }\n\n    onEditOperationName(newOperationName) {\n        this.parameters.operationName = newOperationName;\n        this.updateURL();\n    }\n\n    updateURL() {\n        const newSearch = '?' + Object.keys(parameters)\n            .filter(key => {\n                return Boolean(parameters[key]);\n            }).map(key => {\n                return `${encodeURIComponent(key)} = ${encodeURIComponent(parameters[key])}`;\n            }).join('&');\n\n        history.replaceState(null, null, newSearch);\n    }\n\n    // Defines a GraphQL fetcher using the fetch API.\n    fetcher(graphQLParams) {\n        return fetch(window.location.origin, {\n                method: 'post',\n                headers: {\n                    'Accept': 'application/json',\n                    'Content-Type': 'application/json',\n                },\n                body: JSON.stringify(graphQLParams),\n                credentials: 'include',\n            })\n            .then(response => response.text())\n            .then(responseBody => {\n                try {\n                    return JSON.parse(responseBody);\n                } catch (error) {\n                    return responseBody;\n                }\n            });\n    }\n\n    render(){\n        return <GraphiQL \n                    fetcher={::this.fetcher}\n                    query={this.parameters.query}\n                    variables={this.parameters.variables}\n                    operationName={this.parameters.operationName}\n                    onEditQuery={::this.onEditQuery}\n                    onEditVariables={::this.onEditVariables}\n                    onEditOperationName={::this.onEditOperationName}/>\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/client/Graphi.jsx\n **/"],"sourceRoot":""}